---

---

<button
  class="theme-toggle btn-round-icon"
  id="theme-toggle"
  aria-label="Toggle dark mode"
  type="button"
>
  <!-- Sun icon (shown in dark mode) -->
  <svg class="icon-sun" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="1.5"
      d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
    ></path>
  </svg>
  <!-- Moon icon (shown in light mode) -->
  <svg class="icon-moon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="1.5"
      d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
    ></path>
  </svg>
</button>

<style>
  .theme-toggle {
    position: fixed;
    top: 1.5rem;
    right: 1.5rem;
    z-index: 50;
    /* Ensure relative positioning for absolute children if not provided by btn-round-icon */
    position: fixed;
  }

  .theme-toggle svg {
    position: absolute;
    transition: all var(--duration-normal) var(--ease-out-expo);
  }

  /* Dark Mode: Show Sun, Hide Moon */
  :global(html.dark) .icon-sun {
    opacity: 1;
    transform: rotate(0) scale(1);
  }
  :global(html.dark) .icon-moon {
    opacity: 0;
    transform: rotate(90deg) scale(0);
  }

  /* Light Mode: Show Moon, Hide Sun */
  :global(html:not(.dark)) .icon-sun {
    opacity: 0;
    transform: rotate(-90deg) scale(0);
  }
  :global(html:not(.dark)) .icon-moon {
    opacity: 1;
    transform: rotate(0) scale(1);
  }
</style>

<script>
  function setupThemeToggle() {
    const toggle = document.getElementById("theme-toggle");
    toggle?.addEventListener("click", () => {
      const isDark = document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });
  }

  // Run on initial load
  setupThemeToggle();

  // Re-run on view transitions if necessary
  document.addEventListener("astro:after-swap", setupThemeToggle);
</script>
